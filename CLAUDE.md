# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Chinese language creative writing project called "GPT Story Maker" - a light novel/web novel with a complex multi-dimensional storyline. The protagonist Lin Wanwan is a medical student who transmigrates into a cultivation world and develops the ability to summon multiple versions of herself from parallel realities through quantum superposition states.

## Repository Structure

- **Vol1-5/**: Volume-specific chapter designs and content
- **è®¾å®š/**: Complete story settings and design documents (see Document Hierarchy below)

## Story Architecture

**Core Concept**: Quantum superposition mechanics where the protagonist exists in multiple states simultaneously, manifesting as up to 42 different personalities/versions of herself.

**Key Elements**:
- Multi-dimensional personality system based on quantum mechanics
- Cultivation world setting with modern scientific knowledge integration
- Progressive power system tied to cultivation realms (Qi Refinement â†’ Foundation Building â†’ Golden Core â†’ Nascent Soul)
- Philosophical themes around identity, choice, and the nature of existence
- The number "42" as a central motif (reference to Hitchhiker's Guide to the Galaxy)

## Core Characters

**Detailed character profiles available in `è®¾å®š/äººæ ¼å›¾é‰´.md`**

Key personalities: Lin Wanwan (Original), System 009, and 42 parallel personalities including core ones (#1 Yandere, #2 Foodie, #7 Mathematician, #21 Child, #35 Lawyer, #42 Answer Keeper). Main antagonist: Chen Yi (The Unifier).

## Writing Guidelines

**Language**: Chinese (Simplified) | **Genre**: Xianxia light novel with quantum mechanics, comedy, and philosophy

**âš ï¸ All detailed writing standards in `è®¾å®š/å†™ä½œè§„èŒƒ.md` - PRIMARY authority for style, dialogue formats, and language rules**

## Document Hierarchy and Management

**ğŸ“Š å®Œæ•´æ–‡æ¡£æ¶æ„è¯·å‚è€ƒï¼š`è®¾å®š/æ–‡æ¡£å±‚çº§å…³ç³».md`**

**Authority Structure** (order of precedence):
1. **è®¾å®š/å†™ä½œè§„èŒƒ.md** - PRIMARY writing standards and style authority
2. **è®¾å®š/äººæ ¼è®¾å®šç»Ÿä¸€è§„èŒƒ.md** - Character personality settings authority (NEW)
3. **è®¾å®š/ç« èŠ‚åˆ›ä½œæ£€æŸ¥æ¸…å•æ¨¡æ¿.md** - Creation workflow authority (UPDATED)
4. **è®¾å®š/å¤§çº².md** - Master outline (plot/setting conflicts)
5. **è®¾å®š/Vol[X]/ç¬¬[X]å·è¯¦ç»†å‰§æƒ…è®¾è®¡.md** - Volume-specific detailed plots (highest priority for specific chapters)
6. **è®¾å®š/å†…å®¹ç´¢å¼•.md** - Navigation index for all settings (auto-generated)
7. **Other è®¾å®š/ files** - Supporting character, faction, and tracking data

**Document Index System**:
- **è®¾å®š/å†…å®¹ç´¢å¼•.md** - Master content index for precise navigation
  - TOC section: Lists files with their index line ranges
  - File sections: Lists chapters with original file line ranges
  - Usage: Use Read tool with specific line numbers for accurate content extraction
  - Generated by: `tools/generate_index.py` (excludes story chapters, settings only)
  - **CRITICAL**: Must regenerate index after ANY settings file modification
  - Automation: Use git hooks and CI hooks to ensure index stays current

**Critical Workflow Rules**:
- Always check `è®¾å®š/å†…å®¹ç´¢å¼•.md` first for document navigation  
- Use Read tool with specific line numbers for precise content extraction
- **äººæ ¼è®¾å®šå˜æ›´** â†’ å¿…é¡»å…ˆåœ¨ `è®¾å®š/äººæ ¼è®¾å®šç»Ÿä¸€è§„èŒƒ.md` å®Œæˆï¼Œç„¶ååŒæ­¥å…¶ä»–ç›¸å…³æ–‡æ¡£
- **Follow authority structure order** for resolving conflicts (è¯¦è§ `è®¾å®š/æ–‡æ¡£å±‚çº§å…³ç³».md`)
- **æ–‡æ¡£å±‚çº§å…³ç³»** â†’ å‚è€ƒ `è®¾å®š/æ–‡æ¡£å±‚çº§å…³ç³».md` äº†è§£å®Œæ•´çš„ä¸»ä»å…³ç³»å’Œæ›´æ–°æµç¨‹

## Key Story Mechanics

**Complete mechanics in `è®¾å®š/äººæ ¼æœºåˆ¶è®¾å®š.md` and `è®¾å®š/å¤§çº².md`**

- 42 personalities via quantum superposition, linked to cultivation realms
- 5 volumes Ã— 20 chapters = 100 total chapters  
- Power scaling: 1.8x-8x multipliers, internal meeting space with accelerated time

## AI-Assisted Workflow

This project uses a specialized AI agent for comprehensive quality assurance:

**Available Agent**:
- `comprehensive-story-checker`: Unified quality validation system that performs:
  - Settings compliance verification (against è®¾å®š/å¤§çº².md and è®¾å®š/å†™ä½œè§„èŒƒ.md)
  - Character authenticity checking (dialogue consistency, personality voices)
  - Narrative coherence validation (scene transitions, plot logic)
  - Humor/philosophy balance assessment

**Quality Assurance Process**:
1. Generate/modify story content
2. Review and request plot/character adjustments
3. Use comprehensive-story-checker for complete validation
4. Agent automatically reads latest standards from è®¾å®š/å†™ä½œè§„èŒƒ.md before each check

## Development Notes

This is a pure creative writing project with no executable code. When working with these files, focus on:
- Maintaining narrative consistency across all setting documents
- Preserving distinct character voices for each personality
- Tracking plot threads and foreshadowing elements using ä¼ç¬”è¿½è¸ªè¡¨.md
- Ensuring philosophical themes remain coherent throughout the story
- Balancing humor with deeper existential questions
- You should always use chinese in the main text
- Update character lists as story develops
- You need to control each chapter to above 2000 words
- Pay attention to the plot's pacing, maintain appropriate suspense between chapters, and arouse the reader's desire to read
- **æ•°å­—ä½¿ç”¨è§„èŒƒ**ï¼šäººæ ¼ç¼–å·ç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡æ•°å­—ï¼ˆå°ä¸€ã€å°äºŒã€å°ä¸ƒã€äºŒåä¸€å·ã€ä¸‰åäº”å·ã€å››åäºŒå·ï¼‰ï¼Œä¸ä½¿ç”¨é˜¿æ‹‰ä¼¯æ•°å­—

## Index Maintenance

**âš ï¸ MANDATORY**: Regenerate `è®¾å®š/å†…å®¹ç´¢å¼•.md` after ANY settings file modification:

**Manual Update**:
```bash
python tools/generate_index.py
```

**Recommended Automation**:
1. **Git Pre-commit Hook**: Auto-regenerate index before commits
2. **CI/CD Pipeline**: Validate index is current on pull requests

## Essential Writing Standards

**âš ï¸ Complete standards in `è®¾å®š/å†™ä½œè§„èŒƒ.md` - READ FIRST before any writing**

Key formats: ç³»ç»Ÿ009ã€dialogueã€‘, Chinese numerals for personalities (å°ä¸€ã€å°äºŒã€å°ä¸ƒã€äºŒåä¸€å·ã€ä¸‰åäº”å·ã€å››åäºŒå·), 2000+ characters per chapter.

## Chapter Writing Workflow

**âš ï¸ Three-Layer Quality System - MANDATORY for every chapter**

### Pre-Writing Validation
1. **è®¾å®š/å†…å®¹ç´¢å¼•.md** â†’ locate relevant documents
2. **è®¾å®š/å†™ä½œè§„èŒƒ.md** â†’ confirm current standards  
3. **è®¾å®š/Vol[X]/ç¬¬[X]å·è¯¦ç»†å‰§æƒ…è®¾è®¡.md** â†’ specific plot (takes precedence)
4. **è®¾å®š/ç« èŠ‚åˆ›ä½œæ£€æŸ¥æ¸…å•æ¨¡æ¿.md** â†’ systematic validation
5. Previous chapters â†’ current story state

### Writing Process
- Follow dialogue formats and terminology from å†™ä½œè§„èŒƒ.md
- Each scene serves clear narrative purpose  
- Maintain character personality consistency
- Balance action, dialogue, internal monologue

### Post-Writing Validation  
- Technical: 2000+ characters, proper formatting
- Content: Logic consistency, character knowledge states
- Quality: Plot advancement, character development
- **Final**: Use `comprehensive-story-checker` agent

**Key Rule**: Detailed plot design files always take precedence over general outline
